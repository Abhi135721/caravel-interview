<!DOCTYPE html>
<html lang="en">
<head>
<title>JavaScript - read JSON from URL</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
 <?php
header("Access-Control-Allow-Origin: *");
?>  
<script>
function printit(){

const proxyurl = "https://cors-anywhere.herokuapp.com/";
const url = "http://roadtrippers.herokuapp.com/api/v1/cities/"; // site that doesn’t send Access-Control-*
/*
fetch(proxyurl + url)
.then(response => response.text())
.then(contents => console.log(contents))
.catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))*/
$.getJSON(proxyurl+url, function(data) {
		document.getElementById("demo").innerHTML = "Cities";
		var items = [];
		$.each( data, function( key, val ) {
				items.push(val);
		});
		var cities = [];
		data = items[0][1];
		console.log(data);
		var i = 0;
		for(i = 0 ; i < items[0].length ; i++){
			data = items[0][i];
			var x = JSON.parse(JSON.stringify(data));
			cities.push("<li id='" + x.id + "'>" + x.name + "</li>");
				
		}
		var i = 0;
		for(i = cities.length; i >= 0 ; i--){
			
			console.log(cities[i]);
		}
		$( "<ul/>", {
				"class": "my-new-list",
				html: cities.join( "" )
			  }).appendTo( "body" );
	});
}

</script>

</head>

<body>
    <div class="mypanel">

    </div>
<button type="button"
onclick="printit()">Get Cities</button>   
<h1 id = "demo"></h1>
</body>
</html>
